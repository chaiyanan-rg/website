<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏•‡∏¥‡∏õ - SlipOK</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
      background: #f0f0f0;
    }
    #result {
      margin-top: 2rem;
      padding: 1rem;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      white-space: pre-wrap;
    }
    input, button {
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
  <h2>‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏•‡∏¥‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏Å‡∏±‡∏ö SlipOK</h2>

  <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏™‡∏•‡∏¥‡∏õ (.jpg, .png):</label><br>
  <input type="file" id="slipFile" accept="image/*"><br>

  <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ):</label><br>
  <input type="number" id="amount" placeholder="‡πÄ‡∏ä‡πà‡∏ô 50"><br>

  <label>
    <input type="checkbox" id="log" checked> ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö LIFF (log)
  </label><br>

  <button onclick="checkSlip()">‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏•‡∏¥‡∏õ</button>

  <div id="result">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ</div>

  <script>
    const API_KEY = "SLIPOKPVDZE86"; // ‡∏à‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì
    const BRANCH_ID = "43243"; // Branch ID ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏à‡πâ‡∏á‡πÑ‡∏ß‡πâ

    async function checkSlip() {
      const fileInput = document.getElementById("slipFile").files[0];
      const log = document.getElementById("log").checked;
      const amount = document.getElementById("amount").value;
      const resultBox = document.getElementById("result");

      if (!fileInput) {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡πà‡∏≠‡∏ô");
        return;
      }

      const formData = new FormData();
      formData.append("files", fileInput);
      formData.append("log", log);
      if (amount) formData.append("amount", amount);

      resultBox.innerText = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...";

      try {
        const response = await fetch(`https://api.slipok.com/api/line/apikey/${BRANCH_ID}`, {
          method: "POST",
          headers: {
            "x-authorization": API_KEY
          },
          body: formData
        });

        const text = await response.text();
        const json = JSON.parse(text);

        if (!json.success) {
          resultBox.innerText = `‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: ${json.message} (code: ${json.code})`;
          return;
        }

        const d = json.data;
        resultBox.innerText = `
‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:

üìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÇ‡∏≠‡∏ô: ${d.transDate} ‡πÄ‡∏ß‡∏•‡∏≤ ${d.transTime}
üí∞ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô: ${Number(d.amount).toLocaleString()} ‡∏ö‡∏≤‡∏ó
üè¶ ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÇ‡∏≠‡∏ô: ${d.sendingBank} ‚Üí ‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà: ${d.receivingBank}
üë§ ‡∏ú‡∏π‡πâ‡πÇ‡∏≠‡∏ô: ${d.sender?.displayName || "-"}
üí≥ ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÇ‡∏≠‡∏ô: ${d.sender?.account?.value || "-"}
üë§ ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö: ${d.receiver?.displayName || "-"}
üí≥ ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö: ${d.receiver?.account?.value || "-"}
üîÑ ‡∏£‡∏´‡∏±‡∏™‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á: ${d.transRef}
üåç ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®: ${d.countryCode}
        `;
      } catch (err) {
        resultBox.innerText = `‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${err.message}`;
      }
    }
  </script>
</body>
</html>
